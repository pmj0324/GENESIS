# Configuration for GENESIS with natural log time transformation

experiment_name: "icecube_diffusion_ln"
description: "GENESIS with natural log (ln) time transformation"

# Model configuration
model:
  seq_len: 5160
  hidden: 512
  depth: 8
  heads: 8
  dropout: 0.1
  fusion: "SUM"
  label_dim: 6
  t_embed_dim: 128
  mlp_ratio: 4.0
  
  # Time transformation
  time_transform: "ln"  # Natural log transformation
  exclude_zero_time: true  # Exclude zero time values
  
  # Signal + Geometry affine normalization: [charge, time, x, y, z]
  # Formula: (x - offset) / scale â†’ charge/time[-2,2], pos[-1,1]
  affine_offsets: [0.0, 0.0, 0.0, 0.0, 0.0]
  affine_scales: [100.0, 10.0, 600.0, 550.0, 550.0]
  
  # Label affine normalization: [Energy, Zenith, Azimuth, X, Y, Z]
  label_offsets: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
  label_scales: [50000000.0, 1.0, 1.0, 600.0, 550.0, 550.0]

# Diffusion configuration
diffusion:
  timesteps: 1000
  beta_start: 0.0001
  beta_end: 0.02
  objective: "eps"
  schedule: "linear"
  
  # Classifier-free guidance
  use_cfg: true
  cfg_scale: 2.0
  cfg_dropout: 0.1

# Training configuration
training:
  epochs: 100
  batch_size: 8
  learning_rate: 1e-4
  optimizer: "AdamW"
  scheduler: "cosine"
  warmup_steps: 1000
  cosine_t_max: 50
  
  # Early stopping
  early_stopping: true
  early_stopping_patience: 10
  early_stopping_min_delta: 1e-4
  early_stopping_mode: "min"
  early_stopping_baseline: null
  early_stopping_restore_best: true
  early_stopping_verbose: true
  
  # Additional training options
  save_best_only: true
  gradient_accumulation_steps: 1
  max_grad_norm: 1.0
  use_amp: false
  
  # Data loading
  num_workers: 4
  pin_memory: true

# Experiment configuration
experiment:
  output_dir: "./outputs"
  checkpoint_dir: "./checkpoints"
  log_dir: "./logs"
  device: "auto"  # "auto", "cpu", "cuda"
  seed: 42
  use_wandb: false
  wandb_project: "genesis-icecube"
  wandb_entity: null
